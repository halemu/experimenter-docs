"use strict";(self.webpackChunkexperimenter_docs=self.webpackChunkexperimenter_docs||[]).push([[6451],{4137:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),h=i,d=u["".concat(s,".").concat(h)]||u[h]||m[h]||o;return n?r.createElement(d,a(a({ref:t},c),{},{components:n})):r.createElement(d,a({ref:t},c))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:i,a[1]=l;for(var p=2;p<o;p++)a[p]=n[p];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},2427:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=n(7462),i=(n(7294),n(4137));const o={id:"ios-preview-testing",title:"Testing the preview flow on iOS",slug:"/ios-preview-testing"},a="Testing the preview flow on iOS",l={unversionedId:"workflow/testing/ios-preview-testing",id:"workflow/testing/ios-preview-testing",title:"Testing the preview flow on iOS",description:"Launching an experiment to Preview the stage server",source:"@site/docs/workflow/testing/ios-preview-testing.md",sourceDirName:"workflow/testing",slug:"/ios-preview-testing",permalink:"/ios-preview-testing",draft:!1,editUrl:"https://github.com/mozilla/experimenter-docs/edit/main/docs/workflow/testing/ios-preview-testing.md",tags:[],version:"current",frontMatter:{id:"ios-preview-testing",title:"Testing the preview flow on iOS",slug:"/ios-preview-testing"},sidebar:"sidebar",previous:{title:"Desktop Feature API testing",permalink:"/desktop-feature-api-testing"},next:{title:"Testing on mobile",permalink:"/testing-on-mobile"}},s={},p=[{value:"Launching an experiment to Preview the stage server",id:"launching-an-experiment-to-preview-the-stage-server",level:2},{value:"Pointing a local iOS build to the stage server",id:"pointing-a-local-ios-build-to-the-stage-server",level:2},{value:"Accessing the secret menu",id:"accessing-the-secret-menu",level:2},{value:"FAQs",id:"faqs",level:3}],c={toc:p},u="wrapper";function m(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"testing-the-preview-flow-on-ios"},"Testing the preview flow on iOS"),(0,i.kt)("h2",{id:"launching-an-experiment-to-preview-the-stage-server"},"Launching an experiment to Preview the stage server"),(0,i.kt)("p",null,"The first step to testing the preview flow is to launch an experiment\nto preview on the stage nimbus server (we should not using the production server for testing). Go to the ",(0,i.kt)("a",{parentName:"p",href:"https://stage.experimenter.nonprod.dataops.mozgcp.net/nimbus/"},"stage experimenter")," and create your experiment there."),(0,i.kt)("p",null,"Follow the first few instructions on ",(0,i.kt)("a",{parentName:"p",href:"/previewing-experiments"},"the preview docs")," to get an experiment to preview. (note that the experiment should be set to target iOS, look at the ",(0,i.kt)("a",{parentName:"p",href:"#faqs"},"FAQ")," section at the bottom)"),(0,i.kt)("h2",{id:"pointing-a-local-ios-build-to-the-stage-server"},"Pointing a local iOS build to the stage server"),(0,i.kt)("p",null,"Since we will be using the stage server, we want Firefox to look for experiments there. For iOS, you can do that on a local build, which you can get running by ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/mozilla-mobile/firefox-ios/blob/main/README.md#building-the-code"},"following the instructions on the ",(0,i.kt)("inlineCode",{parentName:"a"},"firefox-ios")," repository")),(0,i.kt)("p",null,"Once you have a local build using xcode, you should replace ",(0,i.kt)("inlineCode",{parentName:"p"},"NIMBUS_URL")," with ",(0,i.kt)("inlineCode",{parentName:"p"},"https://firefox.settings.services.allizom.org/v1/"),". You can set that on ",(0,i.kt)("inlineCode",{parentName:"p"},"info.plist"),", which lies in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Client")," directory once you have the project setup. ",(0,i.kt)("inlineCode",{parentName:"p"},"NIMBUS_URL")," will have an initial value of ",(0,i.kt)("inlineCode",{parentName:"p"},"$(NIMBUS_URL)"),", replace that with the setting server's url."),(0,i.kt)("h2",{id:"accessing-the-secret-menu"},"Accessing the secret menu"),(0,i.kt)("p",null,"At this point, you can run your local build of Firefox iOS, once it's run:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Access the settings menu and click ",(0,i.kt)("strong",{parentName:"p"},"5")," times on the ",(0,i.kt)("inlineCode",{parentName:"p"},"Firefox Daylight 0.0.1")," under the about section:"),(0,i.kt)("img",{src:"/img/firefox-ios/secret-menu-access.png",height:"500"})),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Scroll all the way to the bottom and click the ",(0,i.kt)("inlineCode",{parentName:"p"},"Experiments")," menu.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click on ",(0,i.kt)("inlineCode",{parentName:"p"},"Edit")," on the top right.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Choose the ",(0,i.kt)("inlineCode",{parentName:"p"},"Use Preview Collection (requires restart)")," option.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click ",(0,i.kt)("inlineCode",{parentName:"p"},"Reset")," and restart the app.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Repeat the steps 1-2, and you should now see the experiment you launched to preview!"))),(0,i.kt)("p",null,"You can also check out this ",(0,i.kt)("a",{parentName:"p",href:"https://docs.google.com/document/d/1XPF4TQQTxRwWDrp907JtWXi4rCJ0Pg1YOpFGCHz8sBc/edit#"},"visual documentation")," for a clear demonstration of how to switch to the preview collection."),(0,i.kt)("h3",{id:"faqs"},"FAQs"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"What kind of experiment should I create?"))),(0,i.kt)("p",null,"If you would like your test to be more in-depth, we recommend you create an iOS experiment that can be directly tested on the UI. For example, you can create an ",(0,i.kt)("inlineCode",{parentName:"p"},"onboarding-default-browser")," experiment by setting the feature config to ",(0,i.kt)("inlineCode",{parentName:"p"},"onboarding-default-browser")," and setting the appropriate values, ",(0,i.kt)("a",{parentName:"p",href:"https://stage.experimenter.nonprod.dataops.mozgcp.net/nimbus/teshaqtest-preview-flow-showhide-default-browser-title-image"},"check out this experiment on experimenter for a complete example")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"I don't see my experiments on Firefox!"))),(0,i.kt)("p",null,"It takes a little time, but if you still can't see the experiments, try restarting the app and double check that you launched your experiment to preview and set the ",(0,i.kt)("inlineCode",{parentName:"p"},"Application")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"Firefox iOS")," and didn't miss any configuration on experimenter. If you keep facing trouble reach out to use on #ask-experimenter on slack!"))}m.isMDXComponent=!0}}]);