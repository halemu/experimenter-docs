"use strict";(self.webpackChunkexperimenter_docs=self.webpackChunkexperimenter_docs||[]).push([[2930],{4137:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>c});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=i.createContext({}),m=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=m(e.components);return i.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=m(n),h=r,c=d["".concat(s,".").concat(h)]||d[h]||u[h]||o;return n?i.createElement(c,a(a({ref:t},p),{},{components:n})):i.createElement(c,a({ref:t},p))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,a=new Array(o);a[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:r,a[1]=l;for(var m=2;m<o;m++)a[m]=n[m];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},7429:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>m});var i=n(7462),r=(n(7294),n(4137));const o={id:"configuring",title:"Experiment Configuration",slug:"/configuring"},a=void 0,l={unversionedId:"workflow/configuring/configuring",id:"workflow/configuring/configuring",title:"Experiment Configuration",description:"From our perspective as experiment owners, experiments are composed of two time periods: the enrollment period and the observation window.",source:"@site/docs/workflow/configuring/configuring.md",sourceDirName:"workflow/configuring",slug:"/configuring",permalink:"/configuring",draft:!1,editUrl:"https://github.com/mozilla/experimenter-docs/edit/main/docs/workflow/configuring/configuring.md",tags:[],version:"current",frontMatter:{id:"configuring",title:"Experiment Configuration",slug:"/configuring"},sidebar:"sidebar",previous:{title:"Onboarding Feature for iOS",permalink:"/onboarding/onboarding-feature-ios"},next:{title:"Previewing Experiments",permalink:"/previewing-experiments"}},s={},m=[{value:"The Enrollment Period",id:"the-enrollment-period",level:2},{value:"General considerations",id:"general-considerations",level:3},{value:"Recommendations",id:"recommendations",level:3},{value:"Getting help",id:"getting-help",level:3},{value:"The Observation Window",id:"the-observation-window",level:2},{value:"Relationship with unenrollment and the end of the experiment.",id:"relationship-with-unenrollment-and-the-end-of-the-experiment",level:3},{value:"Visual explanation",id:"visual-explanation",level:3},{value:"Relationship with Analysis Windows",id:"relationship-with-analysis-windows",level:4},{value:"Getting help",id:"getting-help-1",level:3}],p={toc:m},d="wrapper";function u(e){let{components:t,...o}=e;return(0,r.kt)(d,(0,i.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"From our perspective as experiment owners, experiments are composed of two time periods: the enrollment period and the observation window."),(0,r.kt)("h2",{id:"the-enrollment-period"},"The Enrollment Period"),(0,r.kt)("p",null,"The enrollment period is the time during which the experiment recipe is live. Clients that sync during this time will see the recipe, and potentially enroll (see ",(0,r.kt)("a",{parentName:"p",href:"/bucketing"},"this page on bucketing")," for more details on the enrollment mechanism)."),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Mobile first run experiments are a very important-to-know exception to the enrollment period design."),(0,r.kt)("p",{parentName:"admonition"},"Please consult the ",(0,r.kt)("a",{parentName:"p",href:"/mobile-first-run-experiments"},"mobile first run experiments deep dive")," for more information.")),(0,r.kt)("h3",{id:"general-considerations"},"General considerations"),(0,r.kt)("p",null,"There are a few things that experiment owners should consider when choosing the length of the enrollment period."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Day-of-week bias. Different types of users use the browser on different days of the week. In order to ensure that the experiment results generalize to the complete population, it's recommended to enroll for units of whole weeks (7 days, 14 days, etc). Failing to do so could lead to results that are overly weighted by one type of user (weekday users, weekend users) such than the actual impact when we launch the treatment to all users might be quite different than the experiment results."),(0,r.kt)("li",{parentName:"ul"},"Partial filling on the first day. Launching experiments mid-day results in one day of partial enrollments, which if not accounted for can mean that the experiment was smaller than intended. Therefore, we generally recommend enrolling for an extra day to account for this.")),(0,r.kt)("p",null,"The exact choice of period length should consider the total volume of the experiment, the audience (namely, new vs existing user), and the business needs."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Total volume: without increasing the enrollment proportion, larger experiments will need to enroll longer. Of course, in some situations we can increase the enrollment proportion to achieve a shorter enrollment period."),(0,r.kt)("li",{parentName:"ul"},"Audience:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Existing user experiments: generally, these experiments see the majority of their enrollments quickly, with enrollment volume rapidly falling off as only users who haven't synced are eligible to continue enrolling. It's not uncommon with an experiment like this to see 90% of the enrollments within the first week and 10% in the later weeks. In this case, it may not be possible to extend the enrollment period to achieve larger sizes so the only option would be increasing the enrollment fraction."),(0,r.kt)("li",{parentName:"ul"},"New user experiments: generally, these experiments see enrollment volume scaling linearly with period length. Letting these experiments enroll for 2 weeks will see double the enrollments of a 1-week variant."))),(0,r.kt)("li",{parentName:"ul"},"Business needs: varying business needs can necessitate varying designs.")),(0,r.kt)("h3",{id:"recommendations"},"Recommendations"),(0,r.kt)("p",null,"Putting this together, we generally recommend the following possible lengths for enrollment periods:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"8 days"),(0,r.kt)("li",{parentName:"ul"},"15 days"),(0,r.kt)("li",{parentName:"ul"},"22 days"),(0,r.kt)("li",{parentName:"ul"},"etc.")),(0,r.kt)("h3",{id:"getting-help"},"Getting help"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Please bring questions about enrollment period and sizing either to ",(0,r.kt)("a",{parentName:"em",href:"https://mozilla-hub.atlassian.net/wiki/spaces/DATA/pages/6849684/Office+Hours"},"Data Science Office Hours")," or to ",(0,r.kt)("a",{parentName:"em",href:"https://mozilla.slack.com/archives/CF94YGE03"},"#ask-experimenter"))),(0,r.kt)("h2",{id:"the-observation-window"},"The Observation Window"),(0,r.kt)("p",null,"Once a client has enrolled in an experiment, their Observation Window has begun, during which time we can monitor their telemetry and compute metrics. The windows is usually expressed as the number of days since enrollment and ",(0,r.kt)("em",{parentName:"p"},"is the same for all clients, regardless of when they enroll"),"."),(0,r.kt)("p",null,"The observation window is an abstraction that represents the longest period of time we can observe any individual client for and can be calculated by differencing the enrollment period from the overall runtime for the experiment (observation window = total runtime - enrollment period)."),(0,r.kt)("h3",{id:"relationship-with-unenrollment-and-the-end-of-the-experiment"},"Relationship with unenrollment and the end of the experiment."),(0,r.kt)("p",null,"Clients can unenroll from experiments during the middle of the observation window for a variety of reasons (they've disabled Studies, they no longer meet the targeting, opt-ing out of that specific experiment, etc.). To avoid bias, results are calculated over all clients that ever enrolled (unenrolling from the experiment does not remove a client from the analysis). The only situation that ",(0,r.kt)("em",{parentName:"p"},"may")," exclude a client from analysis would be opt-ing out of telemetry."),(0,r.kt)("p",null,"Ending the experiment in Experimenter finalizes the total runtime of the experiment and enables us to determine how long the observation window can be. As a result, for most clients, the observation window ends before they're actually unenrolled from the experiment."),(0,r.kt)("h3",{id:"visual-explanation"},"Visual explanation"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Enrollment &amp; Observation period workflow",src:n(1339).Z,width:"1693",height:"433"})),(0,r.kt)("p",null,"The above visual explains how the system works for a hypothetical experiment that launched on 9/1, was ended on 9/25 (lasting a total of 24 days), and had an enrollment period of 8 days. This results in an observation window of 24-8=16 days."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"For clients enrolling on day 1 (9/1), their observation window runs from 9/2 through 9/17."),(0,r.kt)("li",{parentName:"ul"},"For clients enrolling on day 2 (9/2), their observation windows runs from 9/3 through 9/18."),(0,r.kt)("li",{parentName:"ul"},"..."),(0,r.kt)("li",{parentName:"ul"},"For clients enrolling on day 8 (9/8), their observation windows runs from 9/9 through 9/24.")),(0,r.kt)("h4",{id:"relationship-with-analysis-windows"},"Relationship with Analysis Windows"),(0,r.kt)("p",null,"All experiment metrics are calculated over an Analysis Window which is a subset of the Observation Window. Analysis windows can be at a daily, weekly, or overall level. In this example, there are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"1 overall window, representing the 16 days after enrollment."),(0,r.kt)("li",{parentName:"ul"},"2 weekly windows. The first week (indexed as 0 in Jetstream and Partybal) is shown in magenta and the second (1st) week is shown in orange. There wasn't enough days to form a 3rd complete week, so metrics can only be calculated over weeks 0 or 1."),(0,r.kt)("li",{parentName:"ul"},"16 daily windows.")),(0,r.kt)("h3",{id:"getting-help-1"},"Getting help"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Please bring questions about observation windows and analysis to ",(0,r.kt)("a",{parentName:"em",href:"https://mozilla-hub.atlassian.net/wiki/spaces/DATA/pages/6849684/Office+Hours"},"Data Science Office Hours")," or to ",(0,r.kt)("a",{parentName:"em",href:"https://mozilla.slack.com/archives/CF94YGE03"},"#ask-experimenter"))))}u.isMDXComponent=!0},1339:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/enrollment_and_observation-e6f7c5815f16dd3ca1e39bad8dda01a4.png"}}]);